<div class="page">
  <main class="box">
    <!-- Marca -->
    <div class="brand">
      <span class="material-icons">house</span>
      <h1>ALOJAPP</h1>
    </div>

    <h2 class="title">Bienvenido de vuelta</h2>
    <p class="subtitle">Inicia sesión para continuar</p>

    <form class="form" [formGroup]="form" (ngSubmit)="submit()">
      <!-- Email / teléfono -->
      <div class="field">
        <label for="email">Correo electrónico o teléfono</label>
        <input
          id="email"
          type="text"
          placeholder="tu.email@example.com"
          formControlName="email"
          [class.invalid]="emailCtrl.touched && emailCtrl.invalid"
          autocomplete="email"
        />
        <small class="msg" *ngIf="emailCtrl.touched && emailCtrl.hasError('required')">
          El correo es obligatorio.
        </small>
        <small class="msg" *ngIf="emailCtrl.touched && emailCtrl.hasError('email')">
          Formato de correo inválido.
        </small>
      </div>

      <!-- Password -->
      <div class="field">
        <div class="row">
          <label for="password">Contraseña</label>
          <a class="link" routerLink="/auth/forgot">¿Olvidaste la contraseña?</a>
        </div>

        <div class="password">
          <input
            id="password"
            [type]="hide ? 'password' : 'text'"
            placeholder="••••••••"
            formControlName="password"
            [class.invalid]="passwordCtrl.touched && passwordCtrl.invalid"
            autocomplete="current-password"
          />
          <button type="button" class="toggle" (click)="hide = !hide" aria-label="Mostrar/ocultar contraseña">
            <span class="material-icons">{{ hide ? 'visibility' : 'visibility_off' }}</span>
          </button>
        </div>

        <small class="msg" *ngIf="passwordCtrl.touched && passwordCtrl.hasError('required')">
          La contraseña es obligatoria.
        </small>
      </div>

      <!-- Enviar -->
      <button class="btn btn-primary" type="submit" [disabled]="loading">
        <span *ngIf="!loading">Iniciar sesión</span>
        <span *ngIf="loading" class="loader" aria-label="Cargando"></span>
      </button>

      <!-- Separador -->
      <div class="divider"><span>o</span></div>

      <!-- Ir a registro -->
      <button class="btn btn-outline" type="button" routerLink="/auth/register">
        Crear cuenta
      </button>

      <!-- Error -->
      <div class="error" *ngIf="errorMsg">{{ errorMsg }}</div>
    </form>
  </main>
</div>
